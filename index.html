<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Diana</title>
</head>

<body>

    <div class="wrapper">
        <textarea id="input" style="height: 300px; width: 400px;"></textarea>
        
    </div>
    <div class="wrapper">
        <button id="undo" style="height: 50px; width: 200px;" type="button" class="btn btn-secondary">undo</button>
        <button id="redo" style="height: 50px; width: 200px;" type="button" class="btn btn-primary">redo</button>


    </div>
    <script src="logic.js"></script>
    <script>
       // Require the library function
       const txtHistory = new window.UndoRedojs(5)
        // Get the textarea
        const textarea = document.querySelector("#input")
        // Add event listener for inputs on the textarea
        textarea.addEventListener('input', () => { 
            // Check if the new textarea value is different
            if (txtHistory.current() !== textarea.value) {
                // Record the textarea value
                txtHistory.record(textarea.value,true)
            }
        })
        // Some browsers will auto-fill the textarea again after reloading, this will deal with that
        setTimeout(() => {
            if (textarea.value) txtHistory.record(textarea.value, true)
        }, 100)
        // The undo button
        document.querySelector("#undo").addEventListener('click', () => {
            if (txtHistory.undo(true) !== undefined) {
                textarea.value = txtHistory.undo()
            }
        })
        // The redo button
        document.querySelector("#redo").addEventListener('click', () => {
            if (txtHistory.redo(true) !== undefined) {
                textarea.value = txtHistory.redo()
            }
        })
        handleOrientationEvent = function(e) {
            var x = event.acceleration.x;
            var y = event.acceleration.y;
            var z = event.acceleration.z;
            // document.getElementById("change").innerHTML = rot;
    
            if((x > 30 || y > 10 || x < -20 || y < -10) && z < 8 && z > -8){
                //document.getElementById("change").innerHTML = "undo";
                
                document.getElementById("undo").click();
                 
            }
            else if(z < -9 || z > 9){
                //document.getElementById("change").innerHTML = "redo";
                
                document.getElementById("redo").click();
                
            }
                // document.getElementById("change").innerHTML = "redo";
            // if (rot-180 > 0){
            //     window.alert("right");
            // }else{
            //     window.alert("left");
            // }
         }
    
         window.addEventListener('devicemotion', handleOrientationEvent, false);

    
        
    </script>
</body>