<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Diana's HCI Assignment 3</title>
</head>

<body>
    <div>
        <p>Move your phone left right to undo</p>
    </div>
    <div>
        <p>Move your phone up and down to redo</p>
    </div>
    <div>
        <textarea id="input" style="height: 200px; width: 300px;"></textarea>

    </div>
    <div class="wrapper">
        <button id="undo"
            style="margin-top: 20px; height: 50px; width: 150px; background-color:#4141ca; color: white;">undo</button>
        <button id="redo"
            style="margin-top: 20px; height: 50px; width: 150px;background-color:#4141ca; color: white;">redo</button>


    </div>
    <script src="logic.js"></script>
    <script>
        // Require the library function
        const txtHistory = new window.UndoRedojs(5)
        // Get the textarea
        const textarea = document.querySelector("#input")
        // Add event listener for editareas on the textarea
        textarea.addEventListener('input', () => {
            // Check if the new textarea value is different
            if (txtHistory.current() !== textarea.value) {
                // Record the textarea value
                txtHistory.record(textarea.value, true)
            }
        })
        // Some browsers will auto-fill the textarea again after reloading, this will deal with that
        setTimeout(() => {
            if (textarea.value) txtHistory.record(textarea.value, true)
        }, 100)

        document.querySelector("#undo").addEventListener('click', () => {
            if (txtHistory.undo(true) !== undefined) {
                textarea.value = txtHistory.undo()
            }
        })
        document.querySelector("#redo").addEventListener('click', () => {
            if (txtHistory.redo(true) !== undefined) {
                textarea.value = txtHistory.redo()
            }
        })
        let state = true
        trackOrientation = function (e) {
            // var x = event.alpha;
            var y = event.beta;
            // var z = event.gamma;    
            if (y < -45 && state == true) {

                document.getElementById("redo").click();
                state = false

            }

            if (y > 12 && state == true) {

                document.getElementById("undo").click();

                state = false

            }



            if (y > -45 && y < 45) {

                state = true

            }
        }

        window.addEventListener('deviceorientation', trackOrientation, false);    
    </script>
</body>